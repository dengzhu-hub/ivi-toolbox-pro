# ä¼ä¸šçº§å£çº¸ä¸‹è½½å·¥å…· v2.0 - ä½¿ç”¨æŒ‡å—

## ğŸ“ æ–‡ä»¶è¯´æ˜

### å¿…éœ€çš„æ–‡ä»¶ï¼ˆä½ éœ€è¦åˆ›å»ºï¼‰

1. **`download_v2.py`** - ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆä»£ç å·²æä¾›ï¼‰
2. **`config.json`** - é…ç½®æ–‡ä»¶ï¼ˆå·²æä¾›æ¨¡æ¿ï¼Œéœ€ä¿®æ”¹ API Keyï¼‰

### è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆç¨‹åºè¿è¡Œåäº§ç”Ÿï¼‰

3. **`manifest.json`** - æ¯ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨ç”Ÿæˆçš„å…ƒæ•°æ®æ–‡ä»¶
4. **`download.log`** - è¿è¡Œæ—¥å¿—æ–‡ä»¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### ç¬¬ 1 æ­¥ï¼šå®‰è£…ä¾èµ–
```bash
pip install aiohttp rich
```

### ç¬¬ 2 æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶
æ‰“å¼€ `config.json`ï¼Œåªéœ€ä¿®æ”¹ç¬¬ 6 è¡Œçš„ API Keyï¼š
```json
"api_keys": [
  "ä½ çš„Unsplash_API_Key"  // â† æ”¹è¿™é‡Œ
],
```

### ç¬¬ 3 æ­¥ï¼šè¿è¡Œç¨‹åº
```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œ
python download_v2.py --config config.json

# æˆ–å¿«é€Ÿä¸‹è½½å•ä¸ªä¸»é¢˜
python download_v2.py --topic car --count 50
```

---

## ğŸ“‚ è¿è¡Œåçš„æ–‡ä»¶ç»“æ„

```
D:/test_images/
â”œâ”€â”€ car/                          # ä¸»é¢˜æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ car_001_abc123.jpg       # ä¸‹è½½çš„å›¾ç‰‡
â”‚   â”œâ”€â”€ car_002_def456.jpg
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ manifest.json            # âœ… è‡ªåŠ¨ç”Ÿæˆçš„å…ƒæ•°æ®
â”œâ”€â”€ nature/
â”‚   â”œâ”€â”€ nature_001_xyz789.jpg
â”‚   â””â”€â”€ manifest.json            # âœ… è‡ªåŠ¨ç”Ÿæˆçš„å…ƒæ•°æ®
â”œâ”€â”€ technology/
â”‚   â””â”€â”€ manifest.json            # âœ… è‡ªåŠ¨ç”Ÿæˆçš„å…ƒæ•°æ®
â””â”€â”€ download.log                 # âœ… è‡ªåŠ¨ç”Ÿæˆçš„æ—¥å¿—
```

---

## ğŸ“„ manifest.json è¯¦è§£

è¿™ä¸ªæ–‡ä»¶æ˜¯**ç¨‹åºè‡ªåŠ¨ç”Ÿæˆ**çš„ï¼ŒåŒ…å«æ¯ä¸ªä¸»é¢˜çš„å®Œæ•´ä¸‹è½½è®°å½•ï¼š

```json
{
  "topic": "car",
  "total_requested": 100,
  "total_downloaded": 95,
  "total_skipped": 3,
  "total_failed": 2,
  "timestamp": "2026-01-13T14:30:00",
  "resolution": "full",
  "images": [
    {
      "id": "abc123xyz",
      "filename": "car_001_abc123.jpg",
      "photographer": "John Doe",
      "width": 6000,
      "height": 4000,
      "color": "#1E3A5F",
      "download_url": "https://...",
      "size": 2456789,
      "status": "success"
    },
    ...
  ]
}
```

### manifest.json çš„ç”¨é€”

âœ… **HMI æµ‹è¯•åœºæ™¯ç”Ÿæˆ** - æ ¹æ®è‰²å½©ã€åˆ†è¾¨ç‡ç­›é€‰æµ‹è¯•ç´ æ  
âœ… **å›¾åº“ç®¡ç†** - å¿«é€ŸæŸ¥è¯¢æ‘„å½±å¸ˆä¿¡æ¯ï¼Œæ»¡è¶³ç‰ˆæƒè¿½æº¯  
âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•** - è„šæœ¬è¯»å–å…ƒæ•°æ®ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚å°ºå¯¸çš„å›¾ç‰‡  
âœ… **æ–­ç‚¹ç»­ä¼ ** - è®°å½•ä¸‹è½½çŠ¶æ€ï¼Œæ”¯æŒå¢é‡ä¸‹è½½  

---

## ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šä¸‹è½½å•ä¸ªä¸»é¢˜æµ‹è¯•
```bash
python download_v2.py --topic car --count 20 --resolution regular
```

### åœºæ™¯ 2ï¼šé«˜é€Ÿæ‰¹é‡ä¸‹è½½
```bash
python download_v2.py --config config.json --concurrent 10
```

### åœºæ™¯ 3ï¼šä¸‹è½½åŸå§‹æœ€é«˜è´¨é‡å›¾ç‰‡
```bash
python download_v2.py --topic nature --count 50 --resolution raw
```

### åœºæ™¯ 4ï¼šæ–­ç‚¹ç»­ä¼ ï¼ˆç¨‹åºä¸­æ–­åç»§ç»­ï¼‰
ç›´æ¥é‡æ–°è¿è¡Œç›¸åŒå‘½ä»¤ï¼Œå·²ä¸‹è½½çš„æ–‡ä»¶ä¼šè‡ªåŠ¨è·³è¿‡ï¼š
```bash
python download_v2.py --config config.json
# ç¨‹åºä¼šæ˜¾ç¤º "â­ï¸ æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·³è¿‡: xxx.jpg"
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶å…³é”®å‚æ•°

| å‚æ•° | æ¨èå€¼ | è¯´æ˜ |
|------|--------|------|
| `concurrent_downloads` | 5-10 | å¹¶å‘ä¸‹è½½æ•°ï¼Œç½‘é€Ÿå¿«å¯è®¾ 10-15 |
| `timeout` | 30-60 | è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œraw/full å»ºè®® 60 |
| `max_retries` | 3 | å¤±è´¥é‡è¯•æ¬¡æ•° |
| `resolution` | `full` | å›¾ç‰‡è´¨é‡ï¼šraw(æœ€é«˜)/full(é«˜)/regular(ä¸­)/small(ä½) |

---

## ğŸ” å¦‚ä½•æŸ¥çœ‹ manifest.json

### æ–¹æ³• 1ï¼šæ–‡æœ¬ç¼–è¾‘å™¨
ç›´æ¥ç”¨è®°äº‹æœ¬/VSCode æ‰“å¼€ `D:/test_images/car/manifest.json`

### æ–¹æ³• 2ï¼šPython è„šæœ¬è¯»å–
```python
import json

with open("D:/test_images/car/manifest.json", "r", encoding="utf-8") as f:
    data = json.load(f)
    
print(f"æˆåŠŸä¸‹è½½: {data['total_downloaded']} å¼ ")
print(f"ç¬¬ä¸€å¼ å›¾æ‘„å½±å¸ˆ: {data['images'][0]['photographer']}")
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæ²¡æœ‰ç”Ÿæˆ manifest.json
**åŸå› **ï¼šå¯èƒ½ä¸‹è½½è¿‡ç¨‹ä¸­æ–­æˆ–é…ç½®æ–‡ä»¶é”™è¯¯  
**è§£å†³**ï¼šæ£€æŸ¥ `download.log` ä¸­çš„é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 2ï¼šAPI é…é¢è€—å°½
**ç°è±¡**ï¼šæ˜¾ç¤º "ğŸ›‘ è§¦å‘ API é…é¢é™åˆ¶"  
**è§£å†³**ï¼š
- ç­‰å¾… 1 å°æ—¶åé‡è¯•ï¼ˆå…è´¹ç‰ˆé™åˆ¶ 50 æ¬¡/å°æ—¶ï¼‰
- æˆ–åœ¨ `config.json` ä¸­æ·»åŠ å¤šä¸ª API Key

### é—®é¢˜ 3ï¼šä¸‹è½½é€Ÿåº¦æ…¢
**è§£å†³**ï¼šå¢åŠ å¹¶å‘æ•°
```json
"concurrent_downloads": 10  // æ”¹ä¸º 10-15
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼ | 100 å¼ å›¾ç‰‡è€—æ—¶ | å¸¦å®½åˆ©ç”¨ç‡ |
|------|---------------|-----------|
| v1.0 ä¸²è¡Œ | çº¦ 15 åˆ†é’Ÿ | 20-30% |
| v2.0 å¹¶å‘(5) | çº¦ 5 åˆ†é’Ÿ | 60-80% |
| v2.0 å¹¶å‘(10) | çº¦ 3 åˆ†é’Ÿ | 80-95% |

---

## ğŸ’¡ é«˜çº§æŠ€å·§

### æŠ€å·§ 1ï¼šæ ¹æ®é¢œè‰²ç­›é€‰å›¾ç‰‡
```python
# è¯»å– manifest.json æ‰¾å‡ºè“è‰²ç³»å›¾ç‰‡
import json

with open("manifest.json") as f:
    data = json.load(f)

blue_images = [
    img for img in data["images"]
    if img["color"].startswith("#1") or img["color"].startswith("#0")
]
print(f"æ‰¾åˆ° {len(blue_images)} å¼ è“è‰²ç³»å›¾ç‰‡")
```

### æŠ€å·§ 2ï¼šæ‰¹é‡é‡å‘½åå¸¦åˆ†è¾¨ç‡ä¿¡æ¯
```python
# ä½¿ç”¨ manifest.json ä¸­çš„å°ºå¯¸ä¿¡æ¯é‡å‘½å
for img in data["images"]:
    old_name = img["filename"]
    new_name = f"{img['width']}x{img['height']}_{old_name}"
    # æ‰§è¡Œé‡å‘½å...
```

---

## ğŸ“ æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `download.log` æ—¥å¿—æ–‡ä»¶
2. ç¡®è®¤ API Key æœ‰æ•ˆ
3. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

**è®°ä½**ï¼š`manifest.json` ä¸éœ€è¦ä½ æ‰‹åŠ¨åˆ›å»ºï¼Œå®ƒæ˜¯ç¨‹åºè¿è¡Œåçš„**äº§ç‰©**ï¼