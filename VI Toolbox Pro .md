# 🚀 IVI Toolbox Pro - 车机工程测试集成平台

> **版本**：v15.3-LOGCAT-FIX (Enterprise Edition)
> **开发者**：Jonas (GitHub: dengzhu-hub)
> **版权所有**：© 2024-2026 Jonas. All Rights Reserved.
> **适用平台**：Windows 10/11 (无需 Python 环境)

---

## 📖 1. 产品简介 (Introduction)

**IVI Toolbox Pro** 是一款专为车载信息娱乐系统 (IVI) 研发与测试工程师打造的**一站式 CLI 运维平台**。

摒弃了传统 ADB 命令行繁琐、枯燥的操作体验，本工具采用现代化的 TUI (文本用户界面) 设计，集成了**智能提权、日志分析、性能监控、应用管理、OTA 配置**及**专业截屏**等核心功能。

**核心理念**：让测试更简单，让数据更直观，让运维更安全。

---

## ⚡ 2. 快速开始 (Quick Start)

### 2.1 部署方式

本工具采用**绿色免安装**设计，即插即用。

1.  解压收到的 `IVI_工具箱_v15.3_发布版.zip`。
2.  确保文件夹内包含 `IVI_Toolbox_Pro.exe` 及 ADB 驱动文件 (`adb.exe` 等)。
3.  **双击 exe 即可运行**。

### 2.2 界面概览

启动后，您将看到极具科技感的**HUD 抬头显示界面**：

- **顶部栏**：显示当前版本、实时系统时间、开发者信息。
- **遥测仪表盘 (Telemetry)**：实时显示连接设备的**型号、安卓版本、序列号、Root 权限状态**以及**日志录制状态**。
- **功能矩阵**：所有功能按“核心运维”与“应用工具”分组排列。

---

## 🛠️ 3. 核心功能详解 (Core Features)

### [1] 🚀 工程提权专家 (Smart Root Engine)

> _告别手动输入 `su` 和繁杂的挂载命令。_

- **智能鉴权**：自动识别设备类型，内置 Adayo 专用密钥 (`adayo@N51`) 注入逻辑。
- **全自动流水线**：一键执行 `Root` -> `Disable Verity` -> `Reboot` (如需) -> `Remount` -> `SELinux Disable`。
- **状态自检**：执行完毕后自动校验 UID、Mount 状态，确保真正获得 RW (读写) 权限。

### [2] 📊 系统实时监控 (IVI Sentinel)

> _像任务管理器一样监控车机性能。_

- **智能兼容**：自动适配不同 Android 版本 (Box/Toybox) 的 `top` 命令格式。
- **白名单模式**：通过配置 `whitelist.txt`，可只监控特定业务进程（如 HMI、Navi）。
- **可视化图表**：实时刷新 CPU 占用率、内存使用情况及高负载进程列表。

### [3] 📺 日志指挥中心 (Log Command Center)

> _本工具的灵魂功能，专为解决“日志抓取难、分析难”而生。_

- **📺 实时监控台 (Live Monitor)**：
  - 类 Android Studio 的彩色日志流。
  - **高级过滤**：支持按 Level (V/D/I/W/E)、Tag、关键词 (Grep)、排除词 (Exclude) 组合过滤。
  - **防崩溃设计**：解决了 Windows 下中文/特殊字符导致的乱码崩溃问题。
  - **智能诊断**：停止监控时，自动生成**诊断报告**（包含监控时长、速率、Top 5 噪音标签、Crash 统计）。
- **▶️ 后台无感录制**：
  - 启动后在后台运行，不影响您操作其他菜单。
  - **自动分卷**：单文件超过 50MB 自动切割，防止日志文件过大无法打开。
  - **录制仪表盘**：实时查看已录时长、文件大小、当前路径。
- **🧹 一键清理**：自动清理 `/mnt/sdcard/AdayoLog`、Tombstones、ANR 及 YUV 临时文件，释放空间。
- **📥 全量导出**：一键打包 AdayoLog、WiFi 日志、OTA 日志到 PC，按时间戳归档。

### [4] 💿 智能安装 APK

- **自动授权**：默认添加 `-g` 参数，安装后自动授予所有运行时权限。
- **降级安装**：支持 `-d` 参数，允许覆盖安装低版本应用。

### [5] 🗑️ 应用管理与卸载 (App Manager)

> _记不住包名？没关系。_

- **模糊搜索**：输入 `scene` 即可搜到 `com.adayo.app.scenemode`。
- **分类浏览**：支持查看所有第三方应用或系统应用。
- **ID 一键卸载**：搜索结果自动编号，输入数字 ID 即可卸载，无需复制冗长的包名。
- **强力卸载**：标准卸载失败时，自动尝试 `pm uninstall --user 0` 移除预装应用。

### [6] 📸 专业截屏工具 (Screenshot Pro)

> _测试工程师的证据留存利器。_

- **⚡ 单次/连拍**：支持单张截图，或按指定间隔（如 0.5s）连续截图，捕捉动态 Bug。
- **⏱️ 延时截图**：设置 10 秒 倒计时，给您留出操作车机的时间。
- **🎨 后期处理**：截图后可立即添加**水印**（设备 ID+时间戳）或进行**区域裁剪**（需安装 Pillow 库，未安装则自动降级为普通截图）。
- **无感传输**：自动保存至 `screenshots/` 目录，不占用车机存储。

### [7] 🔄 设备重启

- **安全重启**：发送重启指令，并自动清除本地缓存的连接状态。

### [8] 🔧 OTA 参数配置 (OTA Config Wizard)

> _无需手动编辑 txt 文件，避免格式错误。_

- **双向同步**：自动从车机拉取 `DeviceInfo.txt` 并解析。
- **格式自适应**：完美支持 **JSON** 格式与 **Key=Value** 格式的配置文件。
- **合规校验**：内置算法校验 VIN 码长度（17 位）及非法字符，防止写入无效配置。
- **原子推送**：修改完成后，自动重新打包并推送到车机生效。

---

## 🌟 4. 产品亮点 (Highlights)

1.  **工业级健壮性 (Robustness)**

    - 针对 Windows 平台深度优化，彻底解决了 `pexpect` 兼容性问题。
    - 所有 ADB 操作均带有**超时保护**和**异常捕获**，不会因为车机卡死而导致工具闪退。
    - 日志流处理增加了 `UTF-8` 强制编码与容错处理，杜绝乱码崩溃。

2.  **极致易用性 (Usability)**

    - **可视化交互**：抛弃冷冰冰的命令行，采用丰富的色彩、表格和进度条。
    - **傻瓜式操作**：复杂的提权、挂载、同步操作全部封装在后台，用户只需按一个键。
    - **状态感知**：主界面实时显示 **● REC** 录制状态，防止忘记停止日志录制。

3.  **数据安全 (Safety)**
    - 敏感操作（如重启、清理日志、卸载）均设有**二次确认**机制。
    - 导出日志和截图自动按**时间戳归档**，避免文件覆盖。

---

## ⚖️ 5. 版权与免责声明 (License)

- 本软件由 **Jonas** 独立开发，核心代码托管于 **dengzhu-hub**。
- 本工具仅供内部研发与测试使用，严禁用于非法用途或未经授权的商业分发。
- 在使用“工程提权”及“系统文件清理”功能前，请确保您已知晓相关风险。

---

**Jonas**
_Senior Test Development Engineer_
_2026-01-10_
