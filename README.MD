---

# 📖 Adayo 车载日志拉取工具 (V16.0.0) 操作使用说明书

**版本：V16.0.0 (最终稳定版)**
**工程师：Jonas (dengzhu-hub)**

---

## Ⅰ. 环境搭建：运行工具的先决条件（完整详述）

本工具是一个 Python 脚本，运行在您的 PC 上，用于与车载设备通信。因此，PC 端必须配置 Python 运行时环境和 ADB 命令行工具。

### 1.1 PC 硬件和操作系统要求

| 硬件/软件项    | 最小配置要求                                     | 建议配置（提供更稳定/快速体验）              |
| :------------- | :----------------------------------------------- | :------------------------------------------- |
| **操作系统**   | Windows 7 或更高版本 / macOS / 任意 Linux 发行版 | **Windows 10/11** 64 位（推荐）              |
| **CPU**        | 任意双核 x86/x64 处理器                          | Intel i5 / AMD Ryzen 5 或更高                |
| **内存 (RAM)** | 4 GB                                             | 8 GB 或更高                                  |
| **存储空间**   | 至少 10 GB 剩余空间（用于保存日志文件）          | 建议使用 SSD 固态硬盘                        |
| **USB 接口**   | 至少一个可用的 **USB 2.0 接口**                  | **USB 3.0/3.1/C 接口**（提供更快的拉取速度） |

### 1.2 安装 Python 运行时环境

本脚本依赖 Python 3.x 环境运行。

1.  **下载 Python 安装包：**

    - 访问 [Python 官方网站](https://www.python.org/downloads/)。
    - **推荐版本：** 下载 **Python 3.8 或更高版本**（64 位）。

2.  **执行安装（以 Windows 为例）：**

    - 双击下载的 `.exe` 安装包。
    - **【🚨 关键步骤】** 在安装向导的第一屏，**必须勾选** 底部的 **`Add Python to PATH`**（将 Python 添加到系统环境变量）。如果未勾选，后续命令行将无法识别 `python` 和 `pip` 命令。
    - 选择 **`Customize installation`**（自定义安装）或 **`Install Now`**（立即安装）。
    - 完成安装。

3.  **验证 Python 环境：**

    - 打开命令行工具（Windows: `CMD` 或 `PowerShell`）。
    - 输入以下命令，验证 Python 是否添加到环境变量：
      ```bash
      python --version
      ```
      如果显示版本号（如 `Python 3.11.x`），则表示安装成功。

### 1.3 安装 Python 依赖库

本工具使用 `rich` 库来美化命令行输出和生成报告表格。

1.  在命令行中输入以下命令：
    ```bash
    pip install rich
    ```
    - `pip` 是 Python 的包管理器，该命令会自动从网络下载并安装 `rich` 库。
    - **验证：** 如果显示 `Successfully installed rich-x.x.x...` 则表示安装成功。

### 1.4 安装和配置 ADB 工具（核心通信组件）

ADB (Android Debug Bridge) 是 PC 与车载设备进行通信的桥梁。它必须在系统的任何路径下都能被命令行调用。

1.  **下载 Platform Tools：**

    - 访问 [Android 开发者网站](https://developer.android.com/tools/releases/platform-tools) 下载最新的 **Android SDK Platform-Tools** 压缩包。

2.  **解压到固定路径：**

    - 将下载的 `platform-tools-latest-xxx.zip` 压缩包解压到一个**固定且容易找到的路径**，例如：`C:\Tools\adb-platform-tools\`。
    - 确保该文件夹内包含 `adb.exe`、`fastboot.exe` 等文件。

3.  **配置系统环境变量 (Windows 步骤)**：

    - **打开环境变量设置：** 右键点击 **“此电脑”** -\> **“属性”** -\> **“高级系统设置”** -\> **“环境变量”**。
    - **编辑 Path 变量：** 在 **“系统变量”** 区域，找到名为 **`Path`** 的变量，双击编辑。
    - **添加路径：** 点击 **“新建”**，然后粘贴您解压的 ADB 文件夹路径（例如：`C:\Tools\adb-platform-tools`）。
    - **保存：** 连续点击 **“确定”** 保存并退出所有对话框。

4.  **验证 ADB：**

    - **必须**打开一个新的命令行窗口（之前的窗口可能无法识别新变量）。
    - 输入以下命令：
      ```bash
      adb version
      ```
      如果显示 ADB 版本信息，则环境变量配置成功。

---

## Ⅱ. 硬件要求与文件准备

### 2.1 车载设备和 USB 连接要求

| 部件             | 必须满足的条件                                                                                                   |
| :--------------- | :--------------------------------------------------------------------------------------------------------------- |
| **车载主机**     | 必须在 **“开发者选项”** 中启用 **“USB 调试”** 开关。                                                             |
| **USB 数据线**   | 使用支持数据传输的 USB 线，确保连接稳定。                                                                        |
| **首次连接授权** | 首次连接 PC 时，设备屏幕上弹出的 **“允许 USB 调试吗？”** 对话框，**必须**选择 **“一律允许”** 并点击 **“确定”**。 |
| **权限支持**     | 设备固件需要支持并允许 `adb root` 操作。本脚本将尝试自动获取最高权限以拉取 `/data` 分区下的 WLAN 日志。          |

### 2.2 文件准备与脚本放置

1.  将 **`pull_logcat_adayo.py`** 脚本文件放置在一个您希望运行和保存日志的目录下，例如：`D:\Project\Adayo_Log_Run\`。

---

## Ⅲ. 工具操作流程 (5 步骤)

### 步骤 1：启动工具与设备连接检查

1.  **打开命令行工具**（CMD 或 PowerShell）。
2.  使用 `cd` 命令进入脚本所在的目录：
    ```bash
    cd D:\Project\Adayo_Log_Run\
    ```
3.  **运行脚本**：
    ```bash
    python pull_logcat_adayo.py
    ```
4.  **STEP 1/5：检查设备连接...**
    - **成功：** 屏幕显示设备的序列号。
    - **失败/无设备：** 请检查 USB 连接和设备上的 **USB 调试授权**。

### 步骤 2： Root 权限和导出路径确认

1.  **STEP 1.5/5：尝试 Root 权限和 Remount...**

    - 工具尝试使用 `adb root` 和 `adb remount` 来获取文件系统读写权限。
    - 看到 **`ADB 已确认以 Root 运行`** 或 **`ADB Remount successful`** 则表示权限增强成功。

2.  **STEP 2/5：获取时间戳并设置导出路径...**

    - 工具将根据设备时间或 PC 时间，自动创建日志导出目录。
    - **路径格式：** `[当前目录]\CarLogs\AdayoLog_WLAN_YYYYMMDD_HHMMSS`

### 步骤 3 & 4：日志拉取（AdayoLog 和 WLAN 日志）

1.  **STEP 3/5：拉取主日志...**

    - 拉取 `/mnt/sdcard/AdayoLog` 下的 14 个日志目录。

2.  **STEP 4/5：拉取 WLAN 日志...**

    - 整体拉取 `/data/vendor/wifi/wlan_logs` 目录。
    - **注意：** 这一步的成功依赖于 Root 权限。

### 步骤 5：生成总结报告

1.  **STEP 5/5：生成报告与最终总结...**
2.  工具显示详细的彩色表格，列出所有 15 个日志项的状态。
    - **`OK (X files)`：** 拉取成功并包含文件。
    - **`OK (Empty Dir)`：** 拉取成功但目录为空。
    - **`FAIL (...)`：** 拉取失败，需根据括号内的提示（如 `Perm. Denied`）进行诊断。
3.  **输出结果：** 所有日志文件和 **`Report.txt`** 将被保存在 **步骤 2** 确认的输出路径中。在 Windows 环境下，程序会自动打开该目录。
